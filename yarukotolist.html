<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Todo List App (React)</title>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      body,
      html {
        height: 100%;
        margin: 0;
        padding: 0;
      }

      #root {
        height: 100%;
      }

      .container {
        display: flex;
        flex-wrap: wrap;
        height: 100%;
      }

      .section {
        flex: 1 0 50%;
        height: 50%;
        box-sizing: border-box;
        padding: 15px;
        border: 1px solid black;
        overflow-y: scroll;
      }

      .header-row {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 10px;
      }

      .header-row h4 {
        margin: 0;
        font-size: 1em;
        white-space: nowrap;
      }

      .section h4 {
        font-size: 1em;
      }

      .purpose-input-group {
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .purpose-input-group input {
        width: 200px;
        padding: 3px 5px;
      }

      .purpose-input-group button {
        padding: 3px 10px;
        cursor: pointer;
        background-color: #4caf50;
        color: white;
        border: none;
        border-radius: 3px;
        font-size: 0.9em;
      }

      .purpose-input-group button:hover {
        background-color: #45a049;
      }

      .purpose-display-group {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: bold;
        font-size: 0.95em;
      }

      .purpose-display-group button {
        padding: 2px 8px;
        cursor: pointer;
        background-color: #2196f3;
        color: white;
        border: none;
        border-radius: 3px;
        font-size: 0.85em;
      }

      .purpose-display-group button:hover {
        background-color: #0b7dda;
      }

      .simple-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }

      .simple-header h4 {
        margin: 0;
        font-size: 1em;
      }

      ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      li {
        margin: 10px;
        padding: 10px;
        background-color: white;
        font-size: 1em;
        cursor: pointer;
        border-radius: 3px;
      }

      li:hover {
        background-color: #f0f0f0;
      }

      .completed {
        text-decoration: line-through;
        color: red;
        opacity: 0.6;
      }

      .task-content {
        display: flex;
        align-items: center;
      }

      .task-text {
        flex: 1;
      }

      .delete-btn {
        cursor: pointer;
        color: #ff4444;
        font-weight: bold;
        font-size: 1.2em;
        padding: 0 8px;
      }

      .delete-btn:hover {
        color: #cc0000;
      }

      /* スマホ対応 */
      @media screen and (max-width: 768px) {
        .container {
          flex-direction: column;
          height: auto;
        }

        .section {
          flex: 1 0 100%;
          height: auto;
          min-height: 300px;
        }

        .header-row {
          flex-direction: column;
          align-items: flex-start;
          gap: 5px;
        }

        .header-row h4 {
          white-space: normal;
        }

        .purpose-input-group {
          width: 100%;
        }

        .purpose-input-group input {
          width: 100%;
          max-width: 250px;
        }

        .purpose-display-group {
          flex-direction: column;
          align-items: flex-start;
          gap: 5px;
        }

        .section input {
          width: 100%;
          box-sizing: border-box;
        }
      }

      @media print {
        body,
        html {
          width: 297mm;
          height: 210mm;
        }
        .container {
          width: 100%;
          height: 100%;
        }
        .section {
          width: 50%;
          height: 50%;
        }
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState } = React;

      function App() {
        // Section1: 左上 - 緊急かつ重要
        const [purpose, setPurpose] = useState("");
        const [purposeConfirmed, setPurposeConfirmed] = useState(false);
        const [newTask1, setNewTask1] = useState("");
        const [tasks1, setTasks1] = useState([]);

        // Section2: 右上 - 緊急でないが重要
        const [newTask2, setNewTask2] = useState("");
        const [tasks2, setTasks2] = useState([]);

        // Section3: 左下 - 緊急だが重要ではない
        const [newTask3, setNewTask3] = useState("");
        const [tasks3, setTasks3] = useState([]);

        // Section4: 右下 - 緊急でも重要でもない
        const [newTask4, setNewTask4] = useState("");
        const [tasks4, setTasks4] = useState([]);

        const getToday = () => {
          const now = new Date();
          const weekday = ["日", "月", "火", "水", "木", "金", "土"];
          return (
            now.toLocaleDateString("ja-JP") +
            "（" +
            weekday[now.getDay()] +
            "）"
          );
        };

        return (
          <div className="container">
            {/* 左上: 緊急かつ重要 */}
            <div className="section">
              <div className="header-row">
                <h4>やることリスト【緊急かつ重要】</h4>

                {!purposeConfirmed ? (
                  <div className="purpose-input-group">
                    <label>目的:</label>
                    <input
                      value={purpose}
                      onChange={(e) => setPurpose(e.target.value)}
                      onKeyPress={(e) => {
                        if (e.key === "Enter" && purpose.trim()) {
                          setPurposeConfirmed(true);
                        }
                      }}
                      placeholder="本質的な目的を一行で入力..."
                    />
                    <button
                      onClick={() => {
                        if (purpose.trim()) setPurposeConfirmed(true);
                      }}
                    >
                      確定
                    </button>
                  </div>
                ) : (
                  <div className="purpose-display-group">
                    <span>目的: {purpose}</span>
                    <button onClick={() => setPurposeConfirmed(false)}>
                      編集
                    </button>
                  </div>
                )}
              </div>

              <input
                value={newTask1}
                onChange={(e) => setNewTask1(e.target.value)}
                onKeyPress={(e) => {
                  if (e.key === "Enter" && newTask1.trim()) {
                    setTasks1([
                      ...tasks1,
                      { description: newTask1, completed: false },
                    ]);
                    setNewTask1("");
                  }
                }}
                placeholder="本質的で今すぐ必要なタスクは？..."
                size="30"
              />
              <ul>
                {tasks1.map((task, index) => (
                  <li
                    key={index}
                    className={task.completed ? "completed" : ""}
                    onClick={() => {
                      const newTasks = [...tasks1];
                      newTasks[index].completed = !newTasks[index].completed;
                      setTasks1(newTasks);
                    }}
                  >
                    <div className="task-content">
                      <div className="task-text">{task.description}</div>
                      <span
                        className="delete-btn"
                        onClick={(e) => {
                          e.stopPropagation();
                          setTasks1(tasks1.filter((_, i) => i !== index));
                        }}
                      >
                        ×
                      </span>
                    </div>
                  </li>
                ))}
              </ul>
            </div>

            {/* 右上: 緊急でないが重要 */}
            <div className="section">
              <div className="simple-header">
                <h4>【緊急でないが重要】</h4>
                <div style={{ fontWeight: "bold" }}>{getToday()}</div>
              </div>
              <input
                value={newTask2}
                onChange={(e) => setNewTask2(e.target.value)}
                onKeyPress={(e) => {
                  if (e.key === "Enter" && newTask2.trim()) {
                    setTasks2([
                      ...tasks2,
                      { description: newTask2, completed: false },
                    ]);
                    setNewTask2("");
                  }
                }}
                placeholder="本質的だが計画的に進めるタスクは？..."
                size="32"
              />
              <ul>
                {tasks2.map((task, index) => (
                  <li
                    key={index}
                    className={task.completed ? "completed" : ""}
                    onClick={() => {
                      const newTasks = [...tasks2];
                      newTasks[index].completed = !newTasks[index].completed;
                      setTasks2(newTasks);
                    }}
                  >
                    <div className="task-content">
                      <div className="task-text">{task.description}</div>
                      <span
                        className="delete-btn"
                        onClick={(e) => {
                          e.stopPropagation();
                          setTasks2(tasks2.filter((_, i) => i !== index));
                        }}
                      >
                        ×
                      </span>
                    </div>
                  </li>
                ))}
              </ul>
            </div>

            {/* 左下: 緊急だが重要ではない */}
            <div className="section">
              <h4 style={{ margin: "0 0 10px 0" }}>【緊急だが重要ではない】</h4>
              <input
                value={newTask3}
                onChange={(e) => setNewTask3(e.target.value)}
                onKeyPress={(e) => {
                  if (e.key === "Enter" && newTask3.trim()) {
                    setTasks3([
                      ...tasks3,
                      { description: newTask3, completed: false },
                    ]);
                    setNewTask3("");
                  }
                }}
                placeholder="些細だが急ぎのタスクは？（人に任せる）..."
                size="37"
              />
              <ul>
                {tasks3.map((task, index) => (
                  <li
                    key={index}
                    className={task.completed ? "completed" : ""}
                    onClick={() => {
                      const newTasks = [...tasks3];
                      newTasks[index].completed = !newTasks[index].completed;
                      setTasks3(newTasks);
                    }}
                  >
                    <div className="task-content">
                      <div className="task-text">{task.description}</div>
                      <span
                        className="delete-btn"
                        onClick={(e) => {
                          e.stopPropagation();
                          setTasks3(tasks3.filter((_, i) => i !== index));
                        }}
                      >
                        ×
                      </span>
                    </div>
                  </li>
                ))}
              </ul>
            </div>

            {/* 右下: 緊急でも重要でもない */}
            <div className="section">
              <h4 style={{ margin: "0 0 10px 0" }}>【緊急でも重要でもない】</h4>
              <input
                value={newTask4}
                onChange={(e) => setNewTask4(e.target.value)}
                onKeyPress={(e) => {
                  if (e.key === "Enter" && newTask4.trim()) {
                    setTasks4([
                      ...tasks4,
                      { description: newTask4, completed: false },
                    ]);
                    setNewTask4("");
                  }
                }}
                placeholder="些末な事はやらないと決める...視界から外す、スマホ電源切る...通知オフ..."
                size="50"
                style={{ width: "90%", maxWidth: "500px" }}
              />
              <ul>
                {tasks4.map((task, index) => (
                  <li
                    key={index}
                    className={task.completed ? "completed" : ""}
                    onClick={() => {
                      const newTasks = [...tasks4];
                      newTasks[index].completed = !newTasks[index].completed;
                      setTasks4(newTasks);
                    }}
                  >
                    <div className="task-content">
                      <div className="task-text">{task.description}</div>
                      <span
                        className="delete-btn"
                        onClick={(e) => {
                          e.stopPropagation();
                          setTasks4(tasks4.filter((_, i) => i !== index));
                        }}
                      >
                        ×
                      </span>
                    </div>
                  </li>
                ))}
              </ul>
            </div>
          </div>
        );
      }

      ReactDOM.render(<App />, document.getElementById("root"));
    </script>
  </body>
</html>
